<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:include="sys/include :: header"></head>

<style type="text/css">

</style>

<body class="white-bg">
	<div class="wrapper wrapper-content animated fadeInRight ibox-content">
		<form class="form-horizontal m" id="form-standard-add">
			<input id="treeId" name="categoryId" type="hidden" th:value="${category.id}"   />
			<input id="id" name="id" type="hidden"><!--判断唯一要用到id，避免出现undefine-->
			<div class="form-group">
				<label class="col-sm-3 control-label ">所属分类：</label>
				<div class="col-sm-8">
					<input class="form-control" type="text" id="categoryName" onclick="selectCategoryTree()" readonly="true" th:value="${category.categoryName}"/>
				</div>
			</div>
			<div class="form-group">
				<label class="col-sm-3 control-label">标准问法：</label>
				<div class="col-sm-8">
					<input class="form-control" type="text" name="questionContent"/>
				</div>
			</div>
			<div class="form-group" id="unStandardQuestionContent1">
				<label class="col-sm-3 control-label">相似问法：</label>
				<div class="col-sm-6">
					<input class="form-control" type="text" name="unStandardQuestionContent"/>
				</div>
				<div class="col-sm-2">
					<button type="button" onclick="addUnStandard()" class="btn btn-info"><i class="fa fa-plus"></i>添加相似</button>
				</div>
			</div>
			<div class="form-group">
				<label class="col-sm-3 control-label"></label>
				<div class="col-sm-8">
					<label id="unStandardQuestionNumber"></label>
				</div>
			</div>
			<div class="form-group">
				<label class="col-sm-3 control-label">标准答案：</label>
				<div class="col-sm-8">
					<textarea class="form-control" name="answerContent" rows=6></textarea>
				</div>
			</div>
			
			<div class="form-group">
				<div class="form-control-static col-sm-offset-9">
					<button type="submit" class="btn btn-primary">保存</button>
					<button onclick="$.modal.close()" class="btn btn-danger" type="button">关闭</button>
				</div>
			</div>
		</form>
	</div>
	<div th:include="sys/include :: footer"></div>
   
	<script th:inline="javascript">
	//校验和提交form数据方法
	$("#form-standard-add").validate({
		rules:{
			questionContent:{
				required:true
			}
		},
		submitHandler:function(form){
			$.operate.save(prefix + "/save_standard", $('#form-standard-add').serialize());
		}
	});
	
	//新增相似非标准问法
	function addUnStandard(){
		var unStandardNumber=$("input[name='unStandardQuestionContent']").length;
		var addStr="<div class='form-group' id='unStandardQuestionContent"+(unStandardNumber+1)+"'><label class='col-sm-3 control-label'></label>"+
	               "<div class='col-sm-6'><input class='form-control' type='text' name='unStandardQuestionContent'/></div>"+
	               "<div class='col-sm-2'><button type='button' onclick='delUnStandard("+(unStandardNumber+1)+")' class='btn btn-warning'><i class='fa fa-times'></i>删除</button></div>"+
	               "</div>";
		$("#unStandardQuestionContent1").after(addStr);
		unStandardQuestionNumber(unStandardNumber+1);
	}
	
	//删除非标准问法
	function delUnStandard(index){
		var unStandardNumber=$("input[name='unStandardQuestionContent']").length;
		$("#unStandardQuestionContent"+index).remove();
		unStandardQuestionNumber(unStandardNumber-1);
	}
	//更新已有X条问法内容
	function unStandardQuestionNumber(index){
		$("#unStandardQuestionNumber").html("共有"+index+"条相似问法");
	}
	</script>
</body>
</html>
